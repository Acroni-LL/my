(self["webpackChunkmy"]=self["webpackChunkmy"]||[]).push([[573],{2573:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"employee-container"},[n("div",{staticClass:"employee-header"},[n("employee-header",{ref:"header",on:{"change-loading":function(t){e.loading=t},"show-data":function(t){e.employee=t}}})],1),e._v(" "),n("employee-list",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{employee:e.employee,"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"},on:{"size-change":e.sizeChange,"page-change":e.pageChange}})],1)},a=[],o=(n(4916),n(4765),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("search-header",{directives:[{name:"sticky",rawName:"v-sticky",value:10,expression:"10"}]},[n("div",{staticClass:"top-header-in"},[n("div",[n("el-autocomplete",{staticStyle:{width:"180px","margin-right":"10px","margin-left":"10px"},attrs:{"fetch-suggestions":function(t,n){e.querySearch(e.key,t,n)},clearable:"",placeholder:"请输入员工工号或姓名",size:"small"},model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}}),e._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.btnSearch}},[e._v("查询")])],1),e._v(" "),n("div",[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addEmployee}},[e._v("添加员工")]),e._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.importEmployee}},[e._v("导入员工")]),e._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.exportEmployee}},[e._v("导出员工")])],1)])])}),i=[],c=(n(8309),n(1539),n(9636)),s=n(1273),u=function(e){return(0,s.Z)({url:"/get/employee",params:e})},l="employee_header",p={name:"EmployeeHeader",mixins:[c.Z],data:function(){return{key:l,search:{name:"",pageSize:20,currentPage:1}}},mounted:function(){this.getData()},methods:{btnSearch:function(){this.setLocalHistory(l,this.search.name),this.getData()},getData:function(){var e=this;this.$emit("change-loading",!0),u().then((function(t){var n=t.data;e.$emit("show-data",n)})).catch((function(e){return e})).finally((function(){e.$emit("change-loading",!1)}))},addEmployee:function(){},importEmployee:function(){},exportEmployee:function(){}}},f=p,m=n(1001),d=(0,m.Z)(f,o,i,!1,null,"31114ce5",null),h=d.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.employee.index}},[n("el-table-column",{attrs:{align:"center",label:"#",type:"index",width:"55px"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"姓名",prop:"name",width:"55px"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"电话",prop:"phone",width:"120px"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"部门",prop:"department",width:"55px"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"工号",prop:"userNo",width:"80px"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"入职时间",prop:"createTime"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"账号",prop:"account"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"性别",width:"55px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row.sex;return[0===n?[e._v("女")]:1===n?[e._v("男")]:e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作","min-width":"150px"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("el-button-group",[n("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"warning"}},[e._v("重置密码")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.deleteEmployee(r)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),n("el-pagination",{attrs:{"current-page":e.employee.currentPage,"page-size":e.employee.pageSize,"page-sizes":[20,50,100,200],total:e.employee.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChange,"current-change":e.pageChange}})],1)},v=[],y=n(7673),b=n(6198),x={name:"UserList",props:{employee:{type:Object,default:function(){return{}}}},methods:{sizeChange:function(e){this.$emit("size-change",e)},pageChange:function(e){this.$emit("page-change",e)},deleteEmployee:function(e){var t=this;return(0,b.Z)((0,y.Z)().mark((function n(){var r;return(0,y.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.id,n.next=3,t.$confirm("此操作可能永久删除该员工，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 3:if(r=n.sent,"confirm"===r){n.next=6;break}return n.abrupt("return");case 6:case"end":return n.stop()}}),n)})))()}}},w=x,k=(0,m.Z)(w,g,v,!1,null,"39cd95d1",null),_=k.exports,C={name:"EmployeeManagement",components:{employeeHeader:h,employeeList:_},data:function(){return{loading:!1,employee:{}}},methods:{sizeChange:function(e){this.$refs.header.search.pageSize=e,this.$refs.header.search.currentPage=1,this.$refs.header.getData()},pageChange:function(e){this.$refs.header.search.currentPage=e,this.$refs.header.getData()}}},Z=C,z=(0,m.Z)(Z,r,a,!1,null,"e41b8ade",null),E=z.exports},7007:function(e,t,n){"use strict";n(4916);var r=n(1702),a=n(8052),o=n(2261),i=n(7293),c=n(5112),s=n(8880),u=c("species"),l=RegExp.prototype;e.exports=function(e,t,n,p){var f=c(e),m=!i((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),d=m&&!i((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[u]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return t=!0,null},n[f](""),!t}));if(!m||!d||n){var h=r(/./[f]),g=t(f,""[e],(function(e,t,n,a,i){var c=r(e),s=t.exec;return s===o||s===l.exec?m&&!i?{done:!0,value:h(t,n,a)}:{done:!0,value:c(n,t,a)}:{done:!1}}));a(String.prototype,e,g[0]),a(l,f,g[1])}p&&s(l[f],"sham",!0)}},7651:function(e,t,n){var r=n(7854),a=n(6916),o=n(9670),i=n(614),c=n(4326),s=n(2261),u=r.TypeError;e.exports=function(e,t){var n=e.exec;if(i(n)){var r=a(n,e,t);return null!==r&&o(r),r}if("RegExp"===c(e))return a(s,e,t);throw u("RegExp#exec called on incompatible receiver")}},1150:function(e){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},4765:function(e,t,n){"use strict";var r=n(6916),a=n(7007),o=n(9670),i=n(4488),c=n(1150),s=n(1340),u=n(8173),l=n(7651);a("search",(function(e,t,n){return[function(t){var n=i(this),a=void 0==t?void 0:u(t,e);return a?r(a,t,n):new RegExp(t)[e](s(n))},function(e){var r=o(this),a=s(e),i=n(t,r,a);if(i.done)return i.value;var u=r.lastIndex;c(u,0)||(r.lastIndex=0);var p=l(r,a);return c(r.lastIndex,u)||(r.lastIndex=u),null===p?-1:p.index}]}))},9636:function(e,t,n){"use strict";n(7327),n(1539),n(8862);t["Z"]={methods:{createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},querySearch:function(e,t,n){var r=this.getInvoiceAccountHistory(e),a=t?r.filter(this.createFilter(t)):r;n(a)},getInvoiceAccountHistory:function(e){var t=JSON.parse(localStorage.getItem(e));if(t){for(var n=[],r=0;r<t.length;r++){var a={value:t[r],label:t[r]};n.push(a)}return n}},setLocalHistory:function(e,t){var n=JSON.parse(localStorage.getItem(e));if(!n)return localStorage.setItem(e,JSON.stringify([t]));if(-1===n.indexOf(t)){if(!t)return[];n.unshift(t)}n.length>6&&n.pop(),localStorage.setItem(e,JSON.stringify(n))}}}},9734:function(e){e.exports={title:"智慧游乐园综合管理服务平台",sidebarLogo:!0,tokenOvertime:1800}},1273:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var r=n(7673),a=n(6198),o=(n(1539),n(1703),n(9669)),i=n.n(o),c=n(615);
/*! js-cookie v3.0.1 | MIT */
function s(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var u={read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function l(e,t){function n(n,r,a){if("undefined"!==typeof document){a=s({},t,a),"number"===typeof a.expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),n=encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var i in a)a[i]&&(o+="; "+i,!0!==a[i]&&(o+="="+a[i].split(";")[0]));return document.cookie=n+"="+e.write(r,n)+o}}function r(t){if("undefined"!==typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],r={},a=0;a<n.length;a++){var o=n[a].split("="),i=o.slice(1).join("=");try{var c=decodeURIComponent(o[0]);if(r[c]=e.read(i,c),t===c)break}catch(s){}}return t?r[t]:r}}return Object.create({set:n,get:r,remove:function(e,t){n(e,"",s({},t,{expires:-1}))},withAttributes:function(e){return l(this.converter,s({},this.attributes,e))},withConverter:function(e){return l(s({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var p=l(u,{path:"/"}),f=p,m="com.hxyd.time",d=function(){return f.get(m)},h=function(){return f.set(m,Date.now())},g=function(){return f.remove(m)},v=n(81),y=n(4720),b=n(9734),x=b.tokenOvertime||1800,w=function(){var e=Date.now(),t=d()||0;return(e-t)/1e3>x},k=i().create({baseURL:"https://mock.mengxuegu.com/mock/628d9b2ccc411017d3bb5bcb/mock",timeout:5e3});k.interceptors.request.use(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!c.Z.getters.token){e.next=8;break}if(!w()){e.next=6;break}return e.next=4,c.Z.dispatch("user/logout");case 4:return v.ZP.push("/login"),e.abrupt("return",Promise.reject(new Error("登录过长")));case 6:t.headers["Authorization"]="Bearer ".concat(c.Z.getters.token),t.params=Object.assign({},t.params,{access_token:c.Z.getters.token});case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),k.interceptors.response.use((function(e){if(h(),e.data instanceof Blob)return e.data;var t=e.data,n=t.code,r=t.success,a=t.msg,o=t.data;return r?{code:n,success:r,msg:a,data:o}:(y.Message.error(a),Promise.reject(new Error(a)))}),function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(404!==(null===(n=t.response)||void 0===n?void 0:n.status)){e.next=4;break}return g(),c.Z.commit("user/removeToken"),e.abrupt("return",v.ZP.push("/login"));case 4:if(!t.response||!t.response.data||10002!==t.response.data.code){e.next=10;break}return e.next=7,c.Z.dispatch("user/logout");case 7:v.ZP.push("/login"),e.next=11;break;case 10:y.Message.error(t.message);case 11:return e.abrupt("return",Promise.reject(t));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var _=k}}]);
//# sourceMappingURL=573-legacy.5dd924b8.js.map