"use strict";(self["webpackChunkmy"]=self["webpackChunkmy"]||[]).push([[350],{2350:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-container"},[a("div",{staticClass:"user-header"},[a("user-header",{ref:"header",on:{"show-data":function(t){e.userList=t},"change-loading":function(t){e.loading=t}}})],1),e._v(" "),a("user-list",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","user-list":e.userList},on:{"size-change":e.sizeChange,"page-change":e.pageChange}})],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("search-header",[a("div",{staticClass:"top-header-in"},[a("div",[a("el-autocomplete",{staticStyle:{width:"180px","margin-right":"10px","margin-left":"10px"},attrs:{"fetch-suggestions":function(t,a){e.querySearch(e.key,t,a)},clearable:"",placeholder:"请输入用户名或手机号",size:"small"},model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}}),e._v(" "),a("el-radio-group",{attrs:{size:"mini"},model:{value:e.search.type,callback:function(t){e.$set(e.search,"type",t)},expression:"search.type"}},[a("el-radio-button",{attrs:{label:0}},[e._v("全部")]),e._v(" "),a("el-radio-button",{attrs:{label:1}},[e._v("会员用户")]),e._v(" "),a("el-radio-button",{attrs:{label:2}},[e._v("普通用户")])],1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"8px"},attrs:{size:"small",type:"primary"},on:{click:e.btnSearch}},[e._v("查询")])],1),e._v(" "),a("div",[a("el-button",{staticStyle:{"margin-left":"8px"},attrs:{size:"small",type:"primary"},on:{click:e.importUser}},[e._v("导入")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"8px"},attrs:{size:"small",type:"primary"},on:{click:e.addUser}},[e._v("添加")])],1)])])},l=[],i=a(1273);const c=e=>(0,i.Z)({url:"/get/user/list",params:e});var o=a(9636);const u="user_header";var h={name:"UserHeader",mixins:[o.Z],data(){return{search:{type:0,name:"",pageSize:20,currentPage:1},key:u}},mounted(){this.getData()},methods:{btnSearch(){this.setLocalHistory(u,this.search.name),this.getData()},getData(){this.$emit("change-loading",!0),c(this.search).then((({data:e})=>{this.$emit("show-data",e)})).catch((e=>e)).finally((()=>{this.$emit("change-loading",!1)}))},importUser(){},addUser(){this.$router.push({name:"addUserView"})}}},d=h,g=a(1001),p=(0,g.Z)(d,n,l,!1,null,"f5ce80e2",null),m=p.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",[a("el-table",{attrs:{"row-key":"id",data:e.userList.list,border:""}},[a("el-table-column",{attrs:{align:"center",label:"#",type:"index"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"姓名",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"手机",prop:"phone"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"性别"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row.sex;return[1==a?[e._v("男")]:0==a?[e._v("女")]:e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"会员"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row.vip;return[1==r?a("el-tag",{attrs:{type:"success"}},[e._v("是")]):0==r?a("el-tag",{attrs:{type:"warning"}},[e._v("否")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"生日",prop:"birthday"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"创建时间",prop:"createTime"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.deleteUser(r)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.userList.currentPage,"page-size":e.userList.pageSize,"page-sizes":[20,50,100,200],total:e.userList.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChange,"current-change":e.pageChange}})],1)},f=[],b={name:"UserList",props:{userList:{type:Object,default:()=>({})}},methods:{sizeChange(e){this.$emit("size-change",e)},pageChange(e){this.$emit("page-change",e)},async deleteUser({id:e}){await this.$confirm("此操作可能永久删除该用户，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((e=>e))}}},_=b,y=(0,g.Z)(_,v,f,!1,null,"013e59cd",null),z=y.exports,x={name:"User",components:{userHeader:m,userList:z},data(){return{loading:!1,userList:{}}},methods:{sizeChange(e){this.$refs.header.search.pageSize=e,this.$refs.header.search.currentPage=1,this.$refs.header.getData()},pageChange(e){this.$refs.header.search.currentPage=e,this.$refs.header.getData()}}},k=x,$=(0,g.Z)(k,r,s,!1,null,"7eb15d7e",null),w=$.exports}}]);
//# sourceMappingURL=350.b52164cd.js.map