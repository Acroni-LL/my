(self["webpackChunkmy"]=self["webpackChunkmy"]||[]).push([[573],{2573:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"employee-container"},[n("div",{staticClass:"employee-header"},[n("employee-header",{ref:"header",on:{"change-loading":function(t){e.loading=t},"show-data":function(t){e.employee=t}}})],1),e._v(" "),n("employee-list",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{employee:e.employee,"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"},on:{"size-change":e.sizeChange,"page-change":e.pageChange}})],1)},r=[],i=(n(4916),n(4765),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("search-header",{directives:[{name:"sticky",rawName:"v-sticky",value:10,expression:"10"}]},[n("div",{staticClass:"top-header-in"},[n("div",[n("el-autocomplete",{staticStyle:{width:"180px","margin-right":"10px","margin-left":"10px"},attrs:{"fetch-suggestions":function(t,n){e.querySearch(e.key,t,n)},clearable:"",placeholder:"请输入员工工号或姓名",size:"small"},model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}}),e._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.btnSearch}},[e._v("查询")])],1),e._v(" "),n("div",[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addEmployee}},[e._v("添加员工")]),e._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.importEmployee}},[e._v("导入员工")]),e._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.exportEmployee}},[e._v("导出员工")])],1)])])}),o=[],l=(n(8309),n(1539),n(9636)),c=n(1273),s=function(e){return(0,c.Z)({url:"/get/employee",params:e})},u="employee_header",p={name:"EmployeeHeader",mixins:[l.Z],data:function(){return{key:u,search:{name:"",pageSize:20,currentPage:1}}},mounted:function(){this.getData()},methods:{btnSearch:function(){this.setLocalHistory(u,this.search.name),this.getData()},getData:function(){var e=this;this.$emit("change-loading",!0),s().then((function(t){var n=t.data;e.$emit("show-data",n)})).catch((function(e){return e})).finally((function(){e.$emit("change-loading",!1)}))},addEmployee:function(){},importEmployee:function(){},exportEmployee:function(){}}},m=p,h=n(1001),f=(0,h.Z)(m,i,o,!1,null,"31114ce5",null),d=f.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.employee.index}},[n("el-table-column",{attrs:{align:"center",label:"#",type:"index",width:"55px"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"姓名",prop:"name",width:"55px"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"电话",prop:"phone",width:"120px"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"部门",prop:"department",width:"55px"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"工号",prop:"userNo",width:"80px"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"入职时间",prop:"createTime"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"账号",prop:"account"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"性别",width:"55px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row.sex;return[0===n?[e._v("女")]:1===n?[e._v("男")]:e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作","min-width":"150px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("el-button-group",[n("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"warning"}},[e._v("重置密码")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.deleteEmployee(a)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),n("el-pagination",{attrs:{"current-page":e.employee.currentPage,"page-size":e.employee.pageSize,"page-sizes":[20,50,100,200],total:e.employee.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChange,"current-change":e.pageChange}})],1)},v=[],y=n(7673),x=n(6198),b={name:"UserList",props:{employee:{type:Object,default:function(){return{}}}},methods:{sizeChange:function(e){this.$emit("size-change",e)},pageChange:function(e){this.$emit("page-change",e)},deleteEmployee:function(e){var t=this;return(0,x.Z)((0,y.Z)().mark((function n(){var a;return(0,y.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.id,n.next=3,t.$confirm("此操作可能永久删除该员工，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 3:if(a=n.sent,"confirm"===a){n.next=6;break}return n.abrupt("return");case 6:case"end":return n.stop()}}),n)})))()}}},_=b,w=(0,h.Z)(_,g,v,!1,null,"39cd95d1",null),z=w.exports,S={name:"EmployeeManagement",components:{employeeHeader:d,employeeList:z},data:function(){return{loading:!1,employee:{}}},methods:{sizeChange:function(e){this.$refs.header.search.pageSize=e,this.$refs.header.search.currentPage=1,this.$refs.header.getData()},pageChange:function(e){this.$refs.header.search.currentPage=e,this.$refs.header.getData()}}},k=S,E=(0,h.Z)(k,a,r,!1,null,"e41b8ade",null),C=E.exports},7007:function(e,t,n){"use strict";n(4916);var a=n(1702),r=n(8052),i=n(2261),o=n(7293),l=n(5112),c=n(8880),s=l("species"),u=RegExp.prototype;e.exports=function(e,t,n,p){var m=l(e),h=!o((function(){var t={};return t[m]=function(){return 7},7!=""[e](t)})),f=h&&!o((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[s]=function(){return n},n.flags="",n[m]=/./[m]),n.exec=function(){return t=!0,null},n[m](""),!t}));if(!h||!f||n){var d=a(/./[m]),g=t(m,""[e],(function(e,t,n,r,o){var l=a(e),c=t.exec;return c===i||c===u.exec?h&&!o?{done:!0,value:d(t,n,r)}:{done:!0,value:l(n,t,r)}:{done:!1}}));r(String.prototype,e,g[0]),r(u,m,g[1])}p&&c(u[m],"sham",!0)}},7651:function(e,t,n){var a=n(7854),r=n(6916),i=n(9670),o=n(614),l=n(4326),c=n(2261),s=a.TypeError;e.exports=function(e,t){var n=e.exec;if(o(n)){var a=r(n,e,t);return null!==a&&i(a),a}if("RegExp"===l(e))return r(c,e,t);throw s("RegExp#exec called on incompatible receiver")}},1150:function(e){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},4765:function(e,t,n){"use strict";var a=n(6916),r=n(7007),i=n(9670),o=n(4488),l=n(1150),c=n(1340),s=n(8173),u=n(7651);r("search",(function(e,t,n){return[function(t){var n=o(this),r=void 0==t?void 0:s(t,e);return r?a(r,t,n):new RegExp(t)[e](c(n))},function(e){var a=i(this),r=c(e),o=n(t,a,r);if(o.done)return o.value;var s=a.lastIndex;l(s,0)||(a.lastIndex=0);var p=u(a,r);return l(a.lastIndex,s)||(a.lastIndex=s),null===p?-1:p.index}]}))},9636:function(e,t,n){"use strict";n(7327),n(1539),n(8862);t["Z"]={methods:{createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},querySearch:function(e,t,n){var a=this.getInvoiceAccountHistory(e),r=t?a.filter(this.createFilter(t)):a;n(r)},getInvoiceAccountHistory:function(e){var t=JSON.parse(localStorage.getItem(e));if(t){for(var n=[],a=0;a<t.length;a++){var r={value:t[a],label:t[a]};n.push(r)}return n}},setLocalHistory:function(e,t){var n=JSON.parse(localStorage.getItem(e));if(!n)return localStorage.setItem(e,JSON.stringify([t]));if(-1===n.indexOf(t)){if(!t)return[];n.unshift(t)}n.length>6&&n.pop(),localStorage.setItem(e,JSON.stringify(n))}}}}}]);
//# sourceMappingURL=573-legacy.a0c03eed.js.map